{"version":3,"file":"bundle.js","sources":["../src/shared/index.ts","../src/reactivity/effect.ts","../src/reactivity/baseHandle.ts","../src/reactivity/reacive.ts","../src/reactivity/computed.ts","../src/reactivity/ref.ts","../node_modules/tslib/tslib.es6.js","../src/runtime-core/vnode.ts","../src/runtime-core/apiCreateApp.ts","../src/runtime-core/component.ts","../src/runtime-core/renderer.ts","../src/runtime-core/h.ts","../src/runtime-dom/nodeOpts.ts","../src/runtime-dom/patchProps.ts","../src/runtime-dom/index.ts"],"sourcesContent":["const isObject = (obj: unknown): boolean =>\n  typeof obj === 'object' && obj != null\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty\nconst hasOwn = (target, key): boolean => hasOwnProperty.call(target, key)\n\nconst isArray = (obj): boolean => Array.isArray(obj)\n\nconst isFunction = (fn): boolean => typeof fn === 'function'\n\nconst isString = (val): boolean => typeof val === 'string'\n\nconst hasChange = (oldVal, newVal): boolean => oldVal !== newVal\n\nexport { ShapeFlags } from './ShapeFlags'\n\nexport { isObject, hasOwn, isArray, isFunction, isString, hasChange }\n","import { isArray } from \"../shared/index\"\r\n\r\n// 依赖收集\r\nconst effect = (fn: Function, options: any = {}) => {\r\n  const effect = createReactiveEffect(fn, options)\r\n  if (!options.lazy) {\r\n    effect()\r\n  }\r\n  return effect\r\n}\r\n\r\nconst effectStack: Function[] = []\r\nlet activeEffect: null | Function = null\r\nfunction createReactiveEffect(fn: Function, options) {\r\n  // reactiveEffect只是提示看源码的人的（没有实际用处）\r\n  const effect = function reactiveEffect() {\r\n    if (!effectStack.includes(effect)) {\r\n      try {\r\n        effectStack.push(effect)\r\n        activeEffect = effect\r\n        return fn()\r\n      } finally {\r\n        effectStack.pop()\r\n        activeEffect = effectStack[effectStack.length - 1]\r\n      }\r\n    }\r\n  }\r\n  effect.options = options\r\n  return effect\r\n}\r\n\r\nconst targetMap = new WeakMap()\r\nfunction track(target, key) {\r\n  if (activeEffect == null) return\r\n\r\n  let depsMap = targetMap.get(target)\r\n  if (!depsMap) targetMap.set(target, (depsMap = new Map()))\r\n\r\n  let dep = depsMap.get(key)\r\n  if (!dep) depsMap.set(key, (dep = new Set()))\r\n\r\n  if (!dep.has(activeEffect)) dep.add(activeEffect)\r\n}\r\n\r\nfunction run(effects) {\r\n  if (effects) effects.forEach(effect => {\r\n    if (effect.options.scheduler) {\r\n      effect.options.scheduler(effect)\r\n      return\r\n    }\r\n    effect()\r\n  })\r\n}\r\n\r\nfunction trigger(target, type, key, value?) {\r\n  const depsMap = targetMap.get(target)\r\n  if (!depsMap) return\r\n\r\n  if (key === 'length' && isArray(target)) {\r\n    depsMap.forEach((dep, key) => {\r\n      // 如果改变数组长度，触发更新，如果更改的数组长度小于取值长度，触发更新\r\n      if (key === 'length' || key >= value) {\r\n        run(dep)\r\n      }\r\n    })\r\n    return\r\n  }\r\n\r\n  if (key != null) {\r\n    const effects = depsMap.get(key)\r\n    run(effects)\r\n  }\r\n\r\n  switch (type) {\r\n    case 'add':\r\n      if (isArray(target)) {\r\n        if (parseInt(key) === key) {\r\n          run(depsMap.get('length'))\r\n        }\r\n      }\r\n      break\r\n    case 'set':\r\n      break\r\n    default:\r\n      break\r\n  }\r\n}\r\n\r\nexport {\r\n  effect,\r\n  effectStack,\r\n  activeEffect,\r\n  track,\r\n  trigger\r\n}\r\n","import { hasChange, hasOwn, isArray, isObject } from \"../shared\"\r\nimport { activeEffect, effectStack, track, trigger } from \"./effect\"\r\nimport { reactive } from \"./reacive\"\r\n\r\nconst mutableHandlers = {\r\n  // 取值时将effect存储 recevier是代理后的对象\r\n  get(target, key, recevier) {\r\n    const res = Reflect.get(target, key, recevier)\r\n\r\n    // 如果是内置Symbol，排除依赖收集\r\n    if (typeof key === 'symbol') return res\r\n\r\n    track(target, key)\r\n\r\n    // if (res.__v_isRef) return res.value\r\n\r\n    // 取值时，是对象再代理\r\n    return isObject(res) ? reactive(res) : res\r\n  },\r\n  // 更新值的时候将effect更新\r\n  set(target, key, value, recevier) {\r\n    const oldVal = target[key]\r\n\r\n    // 是否是原有的属性（数组根据索引长度判断）\r\n    const hadKey = isArray(target) && (parseInt(key, 10) + '' === key) ?\r\n      Number(key) < target.length :\r\n      hasOwn(target, key)\r\n\r\n    const result = Reflect.set(target, key, value, recevier)\r\n\r\n    if (!hadKey) {\r\n      // 没有该属性，触发新增操作\r\n      trigger(target, 'add', key, value)\r\n    } else if (hasChange(oldVal, value)) {\r\n      //  值改变，修改属性\r\n      trigger(target, 'set', key, value)\r\n    } else {\r\n\r\n\r\n    }\r\n\r\n    effectStack.forEach(effect => effect())\r\n    return result\r\n  }\r\n}\r\n\r\nexport {\r\n  mutableHandlers\r\n}\r\n","import { isObject } from '../shared/index'\r\n\r\nimport { mutableHandlers } from './baseHandle'\r\n\r\nconst reactive = (target: object) => {\r\n  return createReactiveObject(target, mutableHandlers)\r\n}\r\n\r\n// 映射表中的key必须是对象\r\nconst reactiveMap = new WeakMap()\r\n\r\nfunction createReactiveObject(target, baseHandle) {\r\n  if (!isObject(target)) return target\r\n\r\n  // 如果已经代理过了，不需要再次代理\r\n  const existProxy = reactiveMap.get(target)\r\n  if (existProxy) return existProxy\r\n  // 代理 放到映射表中 返回代理\r\n  const proxy = new Proxy(target, baseHandle)\r\n  reactiveMap.set(target, proxy)\r\n  return proxy\r\n}\r\n\r\nexport {\r\n  reactive\r\n}\r\n","import { isFunction } from '../shared/index'\r\nimport { effect, track, trigger } from './effect';\r\n\r\nclass ComputedRefImpl {\r\n  public effect\r\n  public __v_isReadonly = true\r\n  public __V_isRef = true\r\n  public _dirty = true\r\n  public _value\r\n\r\n  constructor(getter, public setter) {\r\n    // 默认getter执行的时候，依赖一个内置的effect\r\n    this.effect = effect(getter, {\r\n      lazy: true,\r\n      scheduler: (effect) => {\r\n        this._dirty = true // 依赖数据变化，需要重新缓存\r\n        trigger(this, 'set', 'value')\r\n      }\r\n    })\r\n  }\r\n\r\n  // 类属性描述器\r\n  get value() {\r\n    if (this._dirty) { // 缓存\r\n      this._value = this.effect()\r\n      track(this, 'value')\r\n      this._dirty = false\r\n    }\r\n    return this._value\r\n  }\r\n\r\n  set value(nVal) {\r\n    this.setter(nVal)\r\n  }\r\n}\r\n\r\nfunction computed(getterOrOptions) {\r\n  let getter;\r\n  let setter;\r\n\r\n  if (isFunction(getterOrOptions)) {\r\n    getter = getterOrOptions\r\n    setter = () => { console.log('computed not set value') }\r\n  } else {\r\n    getter = getterOrOptions.get\r\n    setter = getterOrOptions.set\r\n  }\r\n\r\n  return new ComputedRefImpl(getter, setter)\r\n}\r\n\r\nexport {\r\n  computed\r\n}\r\n","import { hasChange, isObject } from \"../shared\";\r\nimport { track, trigger } from \"./effect\";\r\nimport { reactive } from \"./reacive\";\r\n\r\nclass RefImpl {\r\n  public readonly __v_isRef = true\r\n  public _value;\r\n  constructor(public rawVal) {\r\n    this._value = convert(rawVal)\r\n  }\r\n\r\n  get value() {\r\n    track(this, 'value')\r\n    return this._value\r\n  }\r\n\r\n  set value(nVal) {\r\n    if (hasChange(this.rawVal, nVal)) {\r\n      this.rawVal = nVal\r\n      this._value = convert(nVal)\r\n      trigger(this, 'set', 'value')\r\n    }\r\n  }\r\n}\r\n\r\nfunction ref(rawVal) {\r\n  return new RefImpl(rawVal)\r\n}\r\n\r\nfunction convert(val) {\r\n  return isObject(val) ? reactive(val) : val\r\n}\r\n\r\nclass ObjectRefImpl {\r\n  constructor(public object, public key) { }\r\n\r\n  get value() {\r\n    return this.object[this.key]\r\n  }\r\n\r\n  set value(nVal) {\r\n    this.object[this.key] = nVal\r\n  }\r\n}\r\n\r\nfunction toRefs(object) {\r\n  const result = Array.isArray(object) ? new Array(object.length) : {}\r\n  for (const key in object) {\r\n    result[key] = new ObjectRefImpl(object, key)\r\n  }\r\n  return result\r\n}\r\n\r\nexport {\r\n  ref,\r\n  toRefs\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { isArray, isObject, isString, ShapeFlags } from '../shared'\n\nfunction createVNode(type, props = {} as any, children = null) {\n  // 判断type是元素还是组件\n  const shapeFlag = isString(type)\n    ? ShapeFlags.ELEMENT\n    : isObject(type)\n    ? ShapeFlags.STATEFUL_COMPONENT\n    : 0\n\n  const vnode = {\n    type,\n    props,\n    children,\n    component: null, // 用于保存组件对应的实例\n    el: null,\n    key: props.key,\n    shapeFlag,\n  }\n\n  if (isArray(children)) {\n    vnode.shapeFlag |= ShapeFlags.ARRAY_CHILDREN\n  }else {\n    vnode.shapeFlag |= ShapeFlags.TEXT_CHILDREN\n  }\n\n  return vnode\n}\n\nexport { createVNode }\n","import { createVNode } from './vnode'\n\nfunction createAppApi(render) {\n  return component => {\n    const app = {\n      mount(container) {\n        const vNode = createVNode(component)\n        render(vNode, container)\n      },\n    }\n    return app\n  }\n}\n\nexport { createAppApi }\n","import { isFunction } from '../shared'\n\nfunction createComponentInstance(vNode) {\n  const instance = {\n    type: vNode.type,\n    props: {},\n    vNode,\n    render: null, // 渲染函数 setup(){ return () =>{} }\n    setupState: null, // setup返回的状态\n    isMounted: false, // 判断组件是否被挂载\n    subtree: null, // 子元素虚拟节点\n  }\n\n  return instance\n}\n\nfunction finishComponentSetup(instance) {\n  const Component = instance.type\n  // 如果有render函数，以render函数中的内容为准\n  if (Component.render && !instance.render) {\n    instance.render = Component.render\n  } else if (!instance.render) {\n    // 没有render方法 就走vue2.x的写法（略...）\n    // template -> ast -> codegen render\n  }\n}\n\nfunction handleSetupResult(instance, result) {\n  if (isFunction(result)) {\n    instance.render = result\n  } else {\n    instance.setupState = result\n  }\n  // 兼容vue2处理方法\n  finishComponentSetup(instance)\n}\n\nfunction setupStatefulComponent(instance) {\n  const Component = instance.type\n  const { setup } = Component\n  if (setup) {\n    const setupResult = setup(instance.props)\n    // setup返回状态，或者render函数\n    handleSetupResult(instance, setupResult)\n  }\n}\n\nfunction setupComponent(instance) {\n  // 属性处理\n  setupStatefulComponent(instance)\n}\n\nexport { createComponentInstance, setupComponent }\n","import { createAppApi } from './apiCreateApp'\nimport { ShapeFlags } from '../shared'\nimport { createComponentInstance, setupComponent } from './component'\nimport { effect } from '../reactivity'\n\nfunction createRenderer(options) {\n  const {\n    createElement: hostCreateElement,\n    inset: hostInset,\n    remove: hostRemove,\n    setElementText: hostSetElementText,\n    createTextNode: hostCreateTextNode,\n    patchProps: hostPatchProps,\n  } = options\n\n  function isSameNode(node1, node2) {\n    return node1.type === node2.type && node1.key === node2.key\n  }\n\n  const patch = (prevNode, vNode, container, anchor = null) => {\n    // 组件更新：同级比对，同Vue2\n    // 1.类型不一样 key不一样，不复用\n    // 2.复用节点后，比对属性\n    // 3.比对子节点，1方有子节点，直接替换或者直接删除\n    // 4.两方都有子节点（真正的diff算法）\n    if (prevNode && !isSameNode(prevNode, vNode)) {\n      hostRemove(prevNode.el)\n      prevNode = null\n    }\n\n    const { shapeFlag } = vNode\n\n    const mountElement = (vNode, container, anchor) => {\n      const { shapeFlag, props, type, children } = vNode\n      // 创建\n      const el = (vNode.el = hostCreateElement(type))\n      // 子节点\n      if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n        hostSetElementText(el, children)\n      } else {\n        mountChildren(children, el)\n      }\n      // 属性\n      if (props) {\n        for (const key in props) {\n          hostPatchProps(el, key, null, props[key])\n        }\n      }\n      // 插入节点\n      hostInset(el, container, anchor)\n    }\n\n    function mountChildren(children, container) {\n      for (let i = 0; i < children.length; i++) {\n        patch(null, children[i], container)\n      }\n    }\n\n    function patchProps(oldProps, newProps, el) {\n      if (oldProps !== newProps) {\n        for (const key in newProps) {\n          const oldOne = oldProps[key]\n          const newOne = newProps[key]\n          if (oldOne !== newProps) hostPatchProps(el, key, oldOne, newOne)\n        }\n        // 旧的属性有，新的没有，删除旧属性\n        for (const key in oldProps) {\n          const oldOne = oldProps[key]\n          if (!(key in newProps)) hostPatchProps(el, key, oldOne, null)\n        }\n      }\n    }\n\n    function patchKeyedChildren(c1, c2, el) {\n      let i = 0\n      let e1 = c1.length - 1\n      let e2 = c2.length - 1\n\n      while (i <= e1 && i <= e2) {\n        // 头相同\n        const n1 = c1[i]\n        const n2 = c2[i]\n        if (isSameNode(n1, n2)) {\n          patch(n1, n2, el)\n        } else {\n          break\n        }\n        i++\n      }\n\n      while (i <= e1 && i <= e2) {\n        // 尾相同\n        const n1 = c1[e1]\n        const n2 = c2[e2]\n        if (isSameNode(n1, n2)) {\n          patch(n1, n2, el)\n        } else {\n          break\n        }\n        e1--\n        e2--\n      }\n\n      if (i > e1) {\n        // 旧的节点都比较完了\n        if (i <= e2) {\n          // 新增节点\n          const nextPos = e2 + 1\n          const anchor = nextPos < c2.length ? c2[nextPos].el : null\n\n          while (i <= e2) {\n            patch(null, c2[i], el, anchor)\n            i++\n          }\n        }\n      } else if (i > e2) {\n        // 新的节点都比较完了 删除旧的节点\n        while (i <= e1) {\n          hostRemove(c1[i].el)\n          i++\n        }\n      } else {\n        // 乱序比对 最长递增子序列\n      }\n    }\n\n    function patchChildren(oldNode, newNode, el) {\n      const oldChildren = oldNode.children\n      const newChildren = newNode.children\n\n      // 4种情况（仅考虑文本和标签，其他元素不考虑）\n      const oldShapeFlag = oldNode.shapeFlag\n      const newShapeFlag = newNode.shapeFlag\n      // 1旧的是文本，新的是文本\n      // 2旧的是数组，新的是文本 如果新的是文本，直接覆盖\n      if (newShapeFlag & ShapeFlags.TEXT_CHILDREN) {\n        if (newChildren !== oldChildren) hostSetElementText(el, newChildren)\n      } else {\n        // 3旧的是数组，新的是数组\n        if (oldShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n          // 真·diff算法\n          patchKeyedChildren(oldChildren, newChildren, el)\n        } else {\n          // 4旧的是文本，新的是数组\n          hostSetElementText(el, '')\n          mountChildren(newChildren, el)\n        }\n      }\n    }\n\n    const patchElement = (prevNode, vNode, container) => {\n      // 比较两个元素，并复用\n      const el = (vNode.el = prevNode.el)\n      const oldProps = prevNode.props\n      const newProps = vNode.props\n\n      // 比对属性\n      patchProps(oldProps, newProps, el)\n      // 比对子节点\n      patchChildren(prevNode, vNode, el)\n    }\n\n    const mountComponent = (vNode, container) => {\n      // 每个组件有一个effect，达到组件级更新的效果\n      // 组件的创建\n      const instance = (vNode.component = createComponentInstance(vNode))\n      // 组件的setup方法\n      setupComponent(instance)\n      // 渲染effect\n      setupRenderEffect(instance, container)\n    }\n\n    function setupRenderEffect(instance, container) {\n      effect(() => {\n        if (!instance.isMounted) {\n          // 组件的创建渲染\n          const subtree = (instance.subtree = instance.render())\n          patch(null, subtree, container)\n          instance.isMounted = true\n        } else {\n          // 组件的更新渲染\n          const prevTree = instance.subtree\n          const nextTree = instance.render()\n          patch(prevTree, nextTree, container)\n        }\n      })\n    }\n\n    const patchComponent = (prevNode, vNode, container) => {}\n\n    const processElement = (prevNode, vNode, container, anchor) => {\n      if (prevNode == null) {\n        // 元素挂载\n        mountElement(vNode, container, anchor)\n      } else {\n        patchElement(prevNode, vNode, container)\n      }\n    }\n\n    const processComponent = (prevNode, vNode, container) => {\n      if (prevNode == null) {\n        // 组件挂载\n        mountComponent(vNode, container)\n      } else {\n        patchComponent(prevNode, vNode, container)\n      }\n    }\n\n    // & 包含类型\n    // 1100 & 0001\n    if (shapeFlag & ShapeFlags.ELEMENT) {\n      // 元素\n      processElement(prevNode, vNode, container, anchor)\n    } else if (shapeFlag & ShapeFlags.STATEFUL_COMPONENT) {\n      //1100 0100\n      // 组件\n      processComponent(prevNode, vNode, container)\n    }\n  }\n\n  const render = (vNode, container) => {\n    // 初次渲染 没有prevNode\n    patch(null, vNode, container)\n  }\n  return {\n    createApp: createAppApi(render),\n  }\n}\n\nexport { createRenderer }\n","import { createVNode } from './vnode'\n\nfunction h(type, props = {}, children = null) {\n  return createVNode(type, props, children)\n}\n\nexport { h }\n","const nodeOpts = {\n  createElement(type) {\n    return document.createElement(type);\n  },\n  inset(child, parent, anchor = null) {\n    parent.insertBefore(child, anchor);\n  },\n  remove(child) {\n    const parent = child.parentNode;\n    if (parent) parent.removeChild(child);\n  },\n  setElementText(el, content) {\n    el.textContent = content;\n  },\n  createTextNode(content) {\n    return document.createTextNode(content);\n  },\n};\n\nexport { nodeOpts };\n","function patchStyle(el, prev, next) {\n  const style = el.style;\n  if (!next) {\n    el.removeAttribute(\"style\");\n  } else {\n    for (const key in next) {\n      style[key] = next[key];\n    }\n    if (prev) {\n      for (const key in prev) {\n        if (!next[key]) {\n          style[key] = \"\";\n        }\n      }\n    }\n  }\n}\n\nfunction patchClass(el, next) {\n  if (!next) next = \"\";\n  el.className = next;\n}\n\nfunction pathAttr(el, key, next) {\n  if (!next) {\n    el.removeAttribute(key);\n  } else {\n    el.setAttribute(key, next);\n  }\n}\n\nfunction patchProps(el, key, prevVal, nextVal) {\n  switch (key) {\n    case \"style\":\n      patchStyle(el, prevVal, nextVal);\n      break;\n    case \"className\":\n      patchClass(el, nextVal);\n    default:\n      pathAttr(el, key, nextVal);\n  }\n}\n\nexport { patchProps };\n","import { createRenderer } from \"../runtime-core\";\nimport { nodeOpts } from \"./nodeOpts\";\nimport { patchProps } from \"./patchProps\";\n\nfunction ensureRenderer() {\n  return createRenderer({ ...nodeOpts, patchProps });\n}\n\nfunction createApp(rootComponent) {\n  const app = ensureRenderer().createApp(rootComponent);\n\n  const { mount } = app;\n  app.mount = function (container) {\n    container = document.querySelector(container);\n    container.innerHTML = \"\";\n    mount(container);\n  };\n  return app;\n}\n\nexport { createApp };\n"],"names":[],"mappings":";;;;;;EAAA,IAAM,QAAQ,GAAG,UAAC,GAAY;MAC5B,OAAA,OAAO,GAAG,KAAK,QAAQ,IAAI,GAAG,IAAI,IAAI;EAAtC,CAAsC,CAAA;EAExC,IAAM,cAAc,GAAG,MAAM,CAAC,SAAS,CAAC,cAAc,CAAA;EACtD,IAAM,MAAM,GAAG,UAAC,MAAM,EAAE,GAAG,IAAc,OAAA,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,GAAA,CAAA;EAEzE,IAAM,OAAO,GAAG,UAAC,GAAG,IAAc,OAAA,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,GAAA,CAAA;EAEpD,IAAM,UAAU,GAAG,UAAC,EAAE,IAAc,OAAA,OAAO,EAAE,KAAK,UAAU,GAAA,CAAA;EAE5D,IAAM,QAAQ,GAAG,UAAC,GAAG,IAAc,OAAA,OAAO,GAAG,KAAK,QAAQ,GAAA,CAAA;EAE1D,IAAM,SAAS,GAAG,UAAC,MAAM,EAAE,MAAM,IAAc,OAAA,MAAM,KAAK,MAAM,GAAA;;ECVhE;MACM,MAAM,GAAG,UAAC,EAAY,EAAE,OAAiB;MAAjB,wBAAA,EAAA,YAAiB;MAC7C,IAAM,MAAM,GAAG,oBAAoB,CAAC,EAAE,EAAE,OAAO,CAAC,CAAA;MAChD,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE;UACjB,MAAM,EAAE,CAAA;OACT;MACD,OAAO,MAAM,CAAA;EACf,EAAC;EAED,IAAM,WAAW,GAAe,EAAE,CAAA;EAClC,IAAI,YAAY,GAAoB,IAAI,CAAA;EACxC,SAAS,oBAAoB,CAAC,EAAY,EAAE,OAAO;;MAEjD,IAAM,MAAM,GAAG,SAAS,cAAc;UACpC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;cACjC,IAAI;kBACF,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;kBACxB,YAAY,GAAG,MAAM,CAAA;kBACrB,OAAO,EAAE,EAAE,CAAA;eACZ;sBAAS;kBACR,WAAW,CAAC,GAAG,EAAE,CAAA;kBACjB,YAAY,GAAG,WAAW,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;eACnD;WACF;OACF,CAAA;MACD,MAAM,CAAC,OAAO,GAAG,OAAO,CAAA;MACxB,OAAO,MAAM,CAAA;EACf,CAAC;EAED,IAAM,SAAS,GAAG,IAAI,OAAO,EAAE,CAAA;EAC/B,SAAS,KAAK,CAAC,MAAM,EAAE,GAAG;MACxB,IAAI,YAAY,IAAI,IAAI;UAAE,OAAM;MAEhC,IAAI,OAAO,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;MACnC,IAAI,CAAC,OAAO;UAAE,SAAS,CAAC,GAAG,CAAC,MAAM,GAAG,OAAO,GAAG,IAAI,GAAG,EAAE,EAAE,CAAA;MAE1D,IAAI,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;MAC1B,IAAI,CAAC,GAAG;UAAE,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,EAAE,EAAE,CAAA;MAE7C,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,YAAY,CAAC;UAAE,GAAG,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;EACnD,CAAC;EAED,SAAS,GAAG,CAAC,OAAO;MAClB,IAAI,OAAO;UAAE,OAAO,CAAC,OAAO,CAAC,UAAA,MAAM;cACjC,IAAI,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE;kBAC5B,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,CAAA;kBAChC,OAAM;eACP;cACD,MAAM,EAAE,CAAA;WACT,CAAC,CAAA;EACJ,CAAC;EAED,SAAS,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,KAAM;MACxC,IAAM,OAAO,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;MACrC,IAAI,CAAC,OAAO;UAAE,OAAM;MAEpB,IAAI,GAAG,KAAK,QAAQ,IAAI,OAAO,CAAC,MAAM,CAAC,EAAE;UACvC,OAAO,CAAC,OAAO,CAAC,UAAC,GAAG,EAAE,GAAG;;cAEvB,IAAI,GAAG,KAAK,QAAQ,IAAI,GAAG,IAAI,KAAK,EAAE;kBACpC,GAAG,CAAC,GAAG,CAAC,CAAA;eACT;WACF,CAAC,CAAA;UACF,OAAM;OACP;MAED,IAAI,GAAG,IAAI,IAAI,EAAE;UACf,IAAM,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;UAChC,GAAG,CAAC,OAAO,CAAC,CAAA;OACb;MAED,QAAQ,IAAI;UACV,KAAK,KAAK;cACR,IAAI,OAAO,CAAC,MAAM,CAAC,EAAE;kBACnB,IAAI,QAAQ,CAAC,GAAG,CAAC,KAAK,GAAG,EAAE;sBACzB,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAA;mBAC3B;eACF;cACD,MAAK;OAKR;EACH;;EClFA,IAAM,eAAe,GAAG;;MAEtB,GAAG,YAAC,MAAM,EAAE,GAAG,EAAE,QAAQ;UACvB,IAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAA;;UAG9C,IAAI,OAAO,GAAG,KAAK,QAAQ;cAAE,OAAO,GAAG,CAAA;UAEvC,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;;;UAKlB,OAAO,QAAQ,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,GAAG,CAAA;OAC3C;;MAED,GAAG,YAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ;UAC9B,IAAM,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,CAAA;;UAG1B,IAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,EAAE,KAAK,GAAG,CAAC;cAChE,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,MAAM;cAC3B,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;UAErB,IAAM,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAA;UAExD,IAAI,CAAC,MAAM,EAAE;;cAEX,OAAO,CAAC,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,CAAC,CAAA;WACnC;eAAM,IAAI,SAAS,CAAC,MAAM,EAAE,KAAK,CAAC,EAAE;;cAEnC,OAAO,CAAC,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,CAAC,CAAA;WACnC;eAAM,CAGN;UAED,WAAW,CAAC,OAAO,CAAC,UAAA,MAAM,IAAI,OAAA,MAAM,EAAE,GAAA,CAAC,CAAA;UACvC,OAAO,MAAM,CAAA;OACd;GACF;;MCxCK,QAAQ,GAAG,UAAC,MAAc;MAC9B,OAAO,oBAAoB,CAAC,MAAM,EAAE,eAAe,CAAC,CAAA;EACtD,EAAC;EAED;EACA,IAAM,WAAW,GAAG,IAAI,OAAO,EAAE,CAAA;EAEjC,SAAS,oBAAoB,CAAC,MAAM,EAAE,UAAU;MAC9C,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;UAAE,OAAO,MAAM,CAAA;;MAGpC,IAAM,UAAU,GAAG,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;MAC1C,IAAI,UAAU;UAAE,OAAO,UAAU,CAAA;;MAEjC,IAAM,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,EAAE,UAAU,CAAC,CAAA;MAC3C,WAAW,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;MAC9B,OAAO,KAAK,CAAA;EACd;;EClBA;MAOE,yBAAY,MAAM,EAAS,MAAM;UAAjC,iBASC;UAT0B,WAAM,GAAN,MAAM,CAAA;UAL1B,mBAAc,GAAG,IAAI,CAAA;UACrB,cAAS,GAAG,IAAI,CAAA;UAChB,WAAM,GAAG,IAAI,CAAA;;UAKlB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE;cAC3B,IAAI,EAAE,IAAI;cACV,SAAS,EAAE,UAAC,MAAM;kBAChB,KAAI,CAAC,MAAM,GAAG,IAAI,CAAA;kBAClB,OAAO,CAAC,KAAI,EAAE,KAAK,EAAE,OAAO,CAAC,CAAA;eAC9B;WACF,CAAC,CAAA;OACH;MAGD,sBAAI,kCAAK;;eAAT;cACE,IAAI,IAAI,CAAC,MAAM,EAAE;kBACf,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,EAAE,CAAA;kBAC3B,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAA;kBACpB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;eACpB;cACD,OAAO,IAAI,CAAC,MAAM,CAAA;WACnB;eAED,UAAU,IAAI;cACZ,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;WAClB;;;SAJA;MAKH,sBAAC;EAAD,CAAC,IAAA;EAED,SAAS,QAAQ,CAAC,eAAe;MAC/B,IAAI,MAAM,CAAC;MACX,IAAI,MAAM,CAAC;MAEX,IAAI,UAAU,CAAC,eAAe,CAAC,EAAE;UAC/B,MAAM,GAAG,eAAe,CAAA;UACxB,MAAM,GAAG,cAAQ,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAA,EAAE,CAAA;OACzD;WAAM;UACL,MAAM,GAAG,eAAe,CAAC,GAAG,CAAA;UAC5B,MAAM,GAAG,eAAe,CAAC,GAAG,CAAA;OAC7B;MAED,OAAO,IAAI,eAAe,CAAC,MAAM,EAAE,MAAM,CAAC,CAAA;EAC5C;;EC7CA;MAGE,iBAAmB,MAAM;UAAN,WAAM,GAAN,MAAM,CAAA;UAFT,cAAS,GAAG,IAAI,CAAA;UAG9B,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAA;OAC9B;MAED,sBAAI,0BAAK;eAAT;cACE,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAA;cACpB,OAAO,IAAI,CAAC,MAAM,CAAA;WACnB;eAED,UAAU,IAAI;cACZ,IAAI,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,EAAE;kBAChC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAA;kBAClB,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,CAAA;kBAC3B,OAAO,CAAC,IAAI,EAAE,KAAK,EAAE,OAAO,CAAC,CAAA;eAC9B;WACF;;;SARA;MASH,cAAC;EAAD,CAAC,IAAA;EAED,SAAS,GAAG,CAAC,MAAM;MACjB,OAAO,IAAI,OAAO,CAAC,MAAM,CAAC,CAAA;EAC5B,CAAC;EAED,SAAS,OAAO,CAAC,GAAG;MAClB,OAAO,QAAQ,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,GAAG,CAAA;EAC5C,CAAC;EAED;MACE,uBAAmB,MAAM,EAAS,GAAG;UAAlB,WAAM,GAAN,MAAM,CAAA;UAAS,QAAG,GAAH,GAAG,CAAA;OAAK;MAE1C,sBAAI,gCAAK;eAAT;cACE,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;WAC7B;eAED,UAAU,IAAI;cACZ,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAA;WAC7B;;;SAJA;MAKH,oBAAC;EAAD,CAAC,IAAA;EAED,SAAS,MAAM,CAAC,MAAM;MACpB,IAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,CAAA;MACpE,KAAK,IAAM,GAAG,IAAI,MAAM,EAAE;UACxB,MAAM,CAAC,GAAG,CAAC,GAAG,IAAI,aAAa,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;OAC7C;MACD,OAAO,MAAM,CAAA;EACf;;ECnDA;EACA;AACA;EACA;EACA;AACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AAeA;EACO,IAAI,QAAQ,GAAG,WAAW;EACjC,IAAI,QAAQ,GAAG,MAAM,CAAC,MAAM,IAAI,SAAS,QAAQ,CAAC,CAAC,EAAE;EACrD,QAAQ,KAAK,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;EAC7D,YAAY,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;EAC7B,YAAY,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACzF,SAAS;EACT,QAAQ,OAAO,CAAC,CAAC;EACjB,MAAK;EACL,IAAI,OAAO,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;EAC3C;;ECpCA,SAAS,WAAW,CAAC,IAAI,EAAE,KAAiB,EAAE,QAAe;MAAlC,sBAAA,EAAA,QAAQ,EAAS;MAAE,yBAAA,EAAA,eAAe;;MAE3D,IAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC;;YAE5B,QAAQ,CAAC,IAAI,CAAC;;gBAEd,CAAC,CAAA;MAEL,IAAM,KAAK,GAAG;UACZ,IAAI,MAAA;UACJ,KAAK,OAAA;UACL,QAAQ,UAAA;UACR,SAAS,EAAE,IAAI;UACf,EAAE,EAAE,IAAI;UACR,GAAG,EAAE,KAAK,CAAC,GAAG;UACd,SAAS,WAAA;OACV,CAAA;MAED,IAAI,OAAO,CAAC,QAAQ,CAAC,EAAE;UACrB,KAAK,CAAC,SAAS,4BAA6B;OAC7C;WAAK;UACJ,KAAK,CAAC,SAAS,0BAA4B;OAC5C;MAED,OAAO,KAAK,CAAA;EACd;;ECzBA,SAAS,YAAY,CAAC,MAAM;MAC1B,OAAO,UAAA,SAAS;UACd,IAAM,GAAG,GAAG;cACV,KAAK,YAAC,SAAS;kBACb,IAAM,KAAK,GAAG,WAAW,CAAC,SAAS,CAAC,CAAA;kBACpC,MAAM,CAAC,KAAK,EAAE,SAAS,CAAC,CAAA;eACzB;WACF,CAAA;UACD,OAAO,GAAG,CAAA;OACX,CAAA;EACH;;ECVA,SAAS,uBAAuB,CAAC,KAAK;MACpC,IAAM,QAAQ,GAAG;UACf,IAAI,EAAE,KAAK,CAAC,IAAI;UAChB,KAAK,EAAE,EAAE;UACT,KAAK,OAAA;UACL,MAAM,EAAE,IAAI;UACZ,UAAU,EAAE,IAAI;UAChB,SAAS,EAAE,KAAK;UAChB,OAAO,EAAE,IAAI;OACd,CAAA;MAED,OAAO,QAAQ,CAAA;EACjB,CAAC;EAED,SAAS,oBAAoB,CAAC,QAAQ;MACpC,IAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAA;;MAE/B,IAAI,SAAS,CAAC,MAAM,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;UACxC,QAAQ,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,CAAA;OACnC;WAAM,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAG5B;EACH,CAAC;EAED,SAAS,iBAAiB,CAAC,QAAQ,EAAE,MAAM;MACzC,IAAI,UAAU,CAAC,MAAM,CAAC,EAAE;UACtB,QAAQ,CAAC,MAAM,GAAG,MAAM,CAAA;OACzB;WAAM;UACL,QAAQ,CAAC,UAAU,GAAG,MAAM,CAAA;OAC7B;;MAED,oBAAoB,CAAC,QAAQ,CAAC,CAAA;EAChC,CAAC;EAED,SAAS,sBAAsB,CAAC,QAAQ;MACtC,IAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAA;MACvB,IAAA,KAAK,GAAK,SAAS,MAAd,CAAc;MAC3B,IAAI,KAAK,EAAE;UACT,IAAM,WAAW,GAAG,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAA;;UAEzC,iBAAiB,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAA;OACzC;EACH,CAAC;EAED,SAAS,cAAc,CAAC,QAAQ;;MAE9B,sBAAsB,CAAC,QAAQ,CAAC,CAAA;EAClC;;EC7CA,SAAS,cAAc,CAAC,OAAO;MAE3B,IAAe,iBAAiB,GAM9B,OAAO,cANuB,EACzB,SAAS,GAKd,OAAO,MALO,EACR,UAAU,GAIhB,OAAO,OAJS,EACF,kBAAkB,GAGhC,OAAO,eAHyB,EAClB,kBAAkB,GAEhC,OAAO,eAFyB,EACtB,cAAc,GACxB,OAAO,WADiB,CACjB;MAEX,SAAS,UAAU,CAAC,KAAK,EAAE,KAAK;UAC9B,OAAO,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,GAAG,CAAA;OAC5D;MAED,IAAM,KAAK,GAAG,UAAC,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,MAAa;UAAb,uBAAA,EAAA,aAAa;;;;;;UAMtD,IAAI,QAAQ,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,KAAK,CAAC,EAAE;cAC5C,UAAU,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAA;cACvB,QAAQ,GAAG,IAAI,CAAA;WAChB;UAEO,IAAA,SAAS,GAAK,KAAK,UAAV,CAAU;UAE3B,IAAM,YAAY,GAAG,UAAC,KAAK,EAAE,SAAS,EAAE,MAAM;cACpC,IAAA,SAAS,GAA4B,KAAK,UAAjC,EAAE,KAAK,GAAqB,KAAK,MAA1B,EAAE,IAAI,GAAe,KAAK,KAApB,EAAE,QAAQ,GAAK,KAAK,SAAV,CAAU;;cAElD,IAAM,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAA;;cAE/C,IAAI,SAAS,0BAA6B;kBACxC,kBAAkB,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAA;eACjC;mBAAM;kBACL,aAAa,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAA;eAC5B;;cAED,IAAI,KAAK,EAAE;kBACT,KAAK,IAAM,GAAG,IAAI,KAAK,EAAE;sBACvB,cAAc,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAA;mBAC1C;eACF;;cAED,SAAS,CAAC,EAAE,EAAE,SAAS,EAAE,MAAM,CAAC,CAAA;WACjC,CAAA;UAED,SAAS,aAAa,CAAC,QAAQ,EAAE,SAAS;cACxC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;kBACxC,KAAK,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAA;eACpC;WACF;UAED,SAAS,UAAU,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE;cACxC,IAAI,QAAQ,KAAK,QAAQ,EAAE;kBACzB,KAAK,IAAM,GAAG,IAAI,QAAQ,EAAE;sBAC1B,IAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAA;sBAC5B,IAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAA;sBAC5B,IAAI,MAAM,KAAK,QAAQ;0BAAE,cAAc,CAAC,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,MAAM,CAAC,CAAA;mBACjE;;kBAED,KAAK,IAAM,GAAG,IAAI,QAAQ,EAAE;sBAC1B,IAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAA;sBAC5B,IAAI,EAAE,GAAG,IAAI,QAAQ,CAAC;0BAAE,cAAc,CAAC,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,CAAA;mBAC9D;eACF;WACF;UAED,SAAS,kBAAkB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE;cACpC,IAAI,CAAC,GAAG,CAAC,CAAA;cACT,IAAI,EAAE,GAAG,EAAE,CAAC,MAAM,GAAG,CAAC,CAAA;cACtB,IAAI,EAAE,GAAG,EAAE,CAAC,MAAM,GAAG,CAAC,CAAA;cAEtB,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,EAAE;;kBAEzB,IAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAA;kBAChB,IAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAA;kBAChB,IAAI,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE;sBACtB,KAAK,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAA;mBAClB;uBAAM;sBACL,MAAK;mBACN;kBACD,CAAC,EAAE,CAAA;eACJ;cAED,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,EAAE;;kBAEzB,IAAM,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAA;kBACjB,IAAM,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAA;kBACjB,IAAI,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE;sBACtB,KAAK,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAA;mBAClB;uBAAM;sBACL,MAAK;mBACN;kBACD,EAAE,EAAE,CAAA;kBACJ,EAAE,EAAE,CAAA;eACL;cAED,IAAI,CAAC,GAAG,EAAE,EAAE;;kBAEV,IAAI,CAAC,IAAI,EAAE,EAAE;;sBAEX,IAAM,OAAO,GAAG,EAAE,GAAG,CAAC,CAAA;sBACtB,IAAM,QAAM,GAAG,OAAO,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,OAAO,CAAC,CAAC,EAAE,GAAG,IAAI,CAAA;sBAE1D,OAAO,CAAC,IAAI,EAAE,EAAE;0BACd,KAAK,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,QAAM,CAAC,CAAA;0BAC9B,CAAC,EAAE,CAAA;uBACJ;mBACF;eACF;mBAAM,IAAI,CAAC,GAAG,EAAE,EAAE;;kBAEjB,OAAO,CAAC,IAAI,EAAE,EAAE;sBACd,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAA;sBACpB,CAAC,EAAE,CAAA;mBACJ;eACF;mBAAM,CAEN;WACF;UAED,SAAS,aAAa,CAAC,OAAO,EAAE,OAAO,EAAE,EAAE;cACzC,IAAM,WAAW,GAAG,OAAO,CAAC,QAAQ,CAAA;cACpC,IAAM,WAAW,GAAG,OAAO,CAAC,QAAQ,CAAA;;cAGpC,IAAM,YAAY,GAAG,OAAO,CAAC,SAAS,CAAA;cACtC,IAAM,YAAY,GAAG,OAAO,CAAC,SAAS,CAAA;;;cAGtC,IAAI,YAAY,0BAA6B;kBAC3C,IAAI,WAAW,KAAK,WAAW;sBAAE,kBAAkB,CAAC,EAAE,EAAE,WAAW,CAAC,CAAA;eACrE;mBAAM;;kBAEL,IAAI,YAAY,4BAA8B;;sBAE5C,kBAAkB,CAAC,WAAW,EAAE,WAAW,EAAE,EAAE,CAAC,CAAA;mBACjD;uBAAM;;sBAEL,kBAAkB,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;sBAC1B,aAAa,CAAC,WAAW,EAAE,EAAE,CAAC,CAAA;mBAC/B;eACF;WACF;UAED,IAAM,YAAY,GAAG,UAAC,QAAQ,EAAE,KAAK,EAAE,SAAS;;cAE9C,IAAM,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAA;cACnC,IAAM,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAA;cAC/B,IAAM,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAA;;cAG5B,UAAU,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE,CAAC,CAAA;;cAElC,aAAa,CAAC,QAAQ,EAAE,KAAK,EAAE,EAAE,CAAC,CAAA;WACnC,CAAA;UAED,IAAM,cAAc,GAAG,UAAC,KAAK,EAAE,SAAS;;;cAGtC,IAAM,QAAQ,IAAI,KAAK,CAAC,SAAS,GAAG,uBAAuB,CAAC,KAAK,CAAC,CAAC,CAAA;;cAEnE,cAAc,CAAC,QAAQ,CAAC,CAAA;;cAExB,iBAAiB,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAA;WACvC,CAAA;UAED,SAAS,iBAAiB,CAAC,QAAQ,EAAE,SAAS;cAC5C,MAAM,CAAC;kBACL,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE;;sBAEvB,IAAM,OAAO,IAAI,QAAQ,CAAC,OAAO,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAA;sBACtD,KAAK,CAAC,IAAI,EAAE,OAAO,EAAE,SAAS,CAAC,CAAA;sBAC/B,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAA;mBAC1B;uBAAM;;sBAEL,IAAM,QAAQ,GAAG,QAAQ,CAAC,OAAO,CAAA;sBACjC,IAAM,QAAQ,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAA;sBAClC,KAAK,CAAC,QAAQ,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAA;mBACrC;eACF,CAAC,CAAA;WACH;UAID,IAAM,cAAc,GAAG,UAAC,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM;cACxD,IAAI,QAAQ,IAAI,IAAI,EAAE;;kBAEpB,YAAY,CAAC,KAAK,EAAE,SAAS,EAAE,MAAM,CAAC,CAAA;eACvC;mBAAM;kBACL,YAAY,CAAC,QAAQ,EAAE,KAAgB,CAAC,CAAA;eACzC;WACF,CAAA;UAED,IAAM,gBAAgB,GAAG,UAAC,QAAQ,EAAE,KAAK,EAAE,SAAS;cAClD,IAAI,QAAQ,IAAI,IAAI,EAAE;;kBAEpB,cAAc,CAAC,KAAK,EAAE,SAAS,CAAC,CAAA;eAGjC;WACF,CAAA;;;UAID,IAAI,SAAS,oBAAuB;;cAElC,cAAc,CAAC,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,CAAC,CAAA;WACnD;eAAM,IAAI,SAAS,+BAAkC;;;cAGpD,gBAAgB,CAAC,QAAQ,EAAE,KAAK,EAAE,SAAS,CAAC,CAAA;WAC7C;OACF,CAAA;MAED,IAAM,MAAM,GAAG,UAAC,KAAK,EAAE,SAAS;;UAE9B,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE,SAAS,CAAC,CAAA;OAC9B,CAAA;MACD,OAAO;UACL,SAAS,EAAE,YAAY,CAAC,MAAM,CAAC;OAChC,CAAA;EACH;;ECjOA,SAAS,CAAC,CAAC,IAAI,EAAE,KAAU,EAAE,QAAe;MAA3B,sBAAA,EAAA,UAAU;MAAE,yBAAA,EAAA,eAAe;MAC1C,OAAO,WAAW,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAA;EAC3C;;ECJA,IAAM,QAAQ,GAAG;MACf,aAAa,YAAC,IAAI;UAChB,OAAO,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;OACrC;MACD,KAAK,YAAC,KAAK,EAAE,MAAM,EAAE,MAAa;UAAb,uBAAA,EAAA,aAAa;UAChC,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;OACpC;MACD,MAAM,YAAC,KAAK;UACV,IAAM,MAAM,GAAG,KAAK,CAAC,UAAU,CAAC;UAChC,IAAI,MAAM;cAAE,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;OACvC;MACD,cAAc,YAAC,EAAE,EAAE,OAAO;UACxB,EAAE,CAAC,WAAW,GAAG,OAAO,CAAC;OAC1B;MACD,cAAc,YAAC,OAAO;UACpB,OAAO,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;OACzC;GACF;;ECjBD,SAAS,UAAU,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI;MAChC,IAAM,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC;MACvB,IAAI,CAAC,IAAI,EAAE;UACT,EAAE,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;OAC7B;WAAM;UACL,KAAK,IAAM,GAAG,IAAI,IAAI,EAAE;cACtB,KAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;WACxB;UACD,IAAI,IAAI,EAAE;cACR,KAAK,IAAM,GAAG,IAAI,IAAI,EAAE;kBACtB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;sBACd,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;mBACjB;eACF;WACF;OACF;EACH,CAAC;EAED,SAAS,UAAU,CAAC,EAAE,EAAE,IAAI;MAC1B,IAAI,CAAC,IAAI;UAAE,IAAI,GAAG,EAAE,CAAC;MACrB,EAAE,CAAC,SAAS,GAAG,IAAI,CAAC;EACtB,CAAC;EAED,SAAS,QAAQ,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI;MAC7B,IAAI,CAAC,IAAI,EAAE;UACT,EAAE,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;OACzB;WAAM;UACL,EAAE,CAAC,YAAY,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;OAC5B;EACH,CAAC;EAED,SAAS,UAAU,CAAC,EAAE,EAAE,GAAG,EAAE,OAAO,EAAE,OAAO;MAC3C,QAAQ,GAAG;UACT,KAAK,OAAO;cACV,UAAU,CAAC,EAAE,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;cACjC,MAAM;UACR,KAAK,WAAW;cACd,UAAU,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;UAC1B;cACE,QAAQ,CAAC,EAAE,EAAE,GAAG,EAAE,OAAO,CAAC,CAAC;OAC9B;EACH;;ECrCA,SAAS,cAAc;MACrB,OAAO,cAAc,uBAAM,QAAQ,KAAE,UAAU,YAAA,IAAG,CAAC;EACrD,CAAC;EAED,SAAS,SAAS,CAAC,aAAa;MAC9B,IAAM,GAAG,GAAG,cAAc,EAAE,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;MAE9C,IAAA,KAAK,GAAK,GAAG,MAAR,CAAS;MACtB,GAAG,CAAC,KAAK,GAAG,UAAU,SAAS;UAC7B,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;UAC9C,SAAS,CAAC,SAAS,GAAG,EAAE,CAAC;UACzB,KAAK,CAAC,SAAS,CAAC,CAAC;OAClB,CAAC;MACF,OAAO,GAAG,CAAC;EACb;;;;;;;;;;;;;;;;;"}