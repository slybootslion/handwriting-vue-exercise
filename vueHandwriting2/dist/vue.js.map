{"version":3,"file":"vue.js","sources":["../src/observer/array.js","../src/observer/dep.js","../src/observer/index.js","../src/state.js","../src/compiler/parse.js","../src/compiler/generate.js","../src/compiler/index.js","../src/utils.js","../src/observer/scheduler.js","../src/observer/watcher.js","../src/vdom/index.js","../src/vdom/patch.js","../src/lifecycle.js","../src/init.js","../render.js","../src/global-api/index.js","../src/index.js"],"sourcesContent":["const oldArrayProtoMethods = Array.prototype\r\n\r\n// 继承Array的原型方法\r\nexport const arrayMethods = Object.create(Array.prototype)\r\n\r\nlet methods = ['push', 'pop', 'shift', 'unshift', 'splice', 'reverse', 'sort']\r\n\r\nmethods.forEach(method => {\r\n  arrayMethods[method] = function (...args) {\r\n    const result = oldArrayProtoMethods[method].call(this, ...args)\r\n    const ob = this.__ob__\r\n    let inserted\r\n    switch (method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args\r\n        break\r\n      case 'splice':\r\n        inserted = args.slice(2)\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    if (inserted) ob.observeArray(inserted)\r\n    ob.dep.notify()\r\n    return result\r\n  }\r\n})\r\n","export function pushTarget (watcher) {\r\n  Dep.target = watcher\r\n}\r\n\r\nexport function popTarget () {\r\n  Dep.target = null\r\n}\r\n\r\nlet id = 0\r\n\r\nclass Dep {\r\n  constructor () {\r\n    this.id = id++\r\n    // 属性对应的watcher\r\n    this.subs = []\r\n  }\r\n\r\n  depend () {\r\n    // water记录dep\r\n    Dep.target.addDep(this)\r\n  }\r\n\r\n  addSub (watcher) {\r\n    this.subs.push(watcher)\r\n  }\r\n\r\n  notify () {\r\n    this.subs.forEach(watcher =>watcher.update())\r\n  }\r\n}\r\n\r\nDep.target = null\r\n\r\nexport {\r\n  Dep\r\n}\r\n","import { arrayMethods } from \"./array\";\r\nimport { Dep } from \"./dep\";\r\n\r\nclass Observer {\r\n  constructor (value) {\r\n    this.dep = new Dep()\r\n    // value.__ob__ = this 不能这么写\r\n    Object.defineProperty(value, '__ob__', {\r\n      value: this,\r\n      enumerable: false, // 不可枚举\r\n      configurable: false // 不可删除\r\n    })\r\n\r\n    if (Array.isArray(value)) {\r\n      // value.__proto__ = arrayMethods\r\n      Object.setPrototypeOf(value, arrayMethods)\r\n      this.observeArray(value)\r\n    } else {\r\n      this.walk(value)\r\n    }\r\n  }\r\n\r\n  observeArray (value) {\r\n    for (let i = 0; i < value.length; i++) {\r\n      // 遍历数组，如果数组中有对象，将对象变为响应式\r\n      observe(value[i])\r\n    }\r\n  }\r\n\r\n  walk (data) {\r\n    // 将对象中的数据全部重新定义成响应式数据\r\n    Object.keys(data).forEach(key => {\r\n      defineReactive(data, key, data[key])\r\n    })\r\n  }\r\n}\r\n\r\nfunction dependArray (arr) {\r\n  for (let i = 0; i < arr.length; i++) {\r\n    let current = arr[i]\r\n    current.__ob__ && current.__ob__.dep.depend()\r\n    if (Array.isArray(current)) {\r\n      dependArray(current)\r\n    }\r\n  }\r\n}\r\n\r\nexport function defineReactive (data, key, value) {\r\n  // value值也可能是一个对象，对数据进行递归拦截\r\n  const childOb = observe(value)\r\n  const dep = new Dep() // 给属性添加dep\r\n  Object.defineProperty(data, key, {\r\n    get () {\r\n      if (Dep.target) {\r\n        // 让 属性 自己的dep记住当前的watcher，也让watcher记住这个dep 依赖收集\r\n        dep.depend()\r\n\r\n        if (childOb) { // 如果对数组取值 会将watcher和数组进行关联\r\n          childOb.dep.depend()\r\n          if (Array.isArray(value)) {\r\n            dependArray(value)\r\n          }\r\n        }\r\n      }\r\n      return value\r\n    },\r\n    set (newValue) {\r\n      if (value === newValue) return false\r\n      // 如果设置的值是对象，继续将新设置的值变成响应式\r\n      observe(newValue)\r\n      value = newValue\r\n      // 发布订阅\r\n      dep.notify()\r\n    }\r\n  })\r\n}\r\n\r\nexport function observe (data) {\r\n  if (typeof data !== 'object' || data == null) return false\r\n  if (data.__ob__) return false\r\n  return new Observer(data)\r\n}\r\n","import { observe } from \"./observer/index\";\r\n\r\nexport function initState (vm) {\r\n  const opts = vm.$options\r\n  // 数据初始化\r\n  if (opts.data) {\r\n    initData(vm)\r\n  }\r\n}\r\n\r\nfunction proxy (vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get () {\r\n      return vm[source][key]\r\n    },\r\n    set (newValue) {\r\n      vm[source][key] = newValue\r\n    }\r\n  })\r\n}\r\n\r\nfunction initData (vm) {\r\n  let data = vm.$options.data\r\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data\r\n  // 通过vm._data获取劫持后的数据\r\n  for (const key in data) {\r\n    proxy(vm, '_data', key)\r\n  }\r\n  observe(data)\r\n}\r\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配结尾的标签 </div>\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配结束的标签 >\r\n\r\nexport function parseHTML (html) {\r\n  function createASTElement (tag, attrs) {\r\n    return {\r\n      tag, type: 1, children: [], attrs, parent: null\r\n    }\r\n  }\r\n\r\n  let root = null\r\n  let currentParent;\r\n  let stack = []\r\n\r\n  // 根据开始标签、结束标签，文本内容生成 AST 语法树\r\n  function start (tagName, attrs) {\r\n    const element = createASTElement(tagName, attrs)\r\n    if (!root) root = element\r\n    currentParent = element\r\n    stack.push(element)\r\n  }\r\n\r\n  function end (tagName) {\r\n    let element = stack.pop()\r\n    currentParent = stack[stack.length - 1]\r\n    if (currentParent) {\r\n      element.parent = currentParent\r\n      currentParent.children.push(element)\r\n    }\r\n  }\r\n\r\n  function chars (text) {\r\n    text = text.replace(/\\s/g, '')\r\n    if (text) {\r\n      currentParent.children.push({ type: 3, text })\r\n    }\r\n  }\r\n\r\n  function advance (n) {\r\n    html = html.substring(n)\r\n  }\r\n\r\n  function parseStartTag () {\r\n    const start = html.match(startTagOpen)\r\n    if (start) {\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs: []\r\n      }\r\n      advance(start[0].length)\r\n      let end, attr\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        advance(attr[0].length)\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5] || true\r\n        })\r\n      }\r\n      if (end) {\r\n        advance(end[0].length)\r\n        return match\r\n      }\r\n    }\r\n  }\r\n\r\n  while (html) {\r\n    let textEnd = html.indexOf('<')\r\n    if (textEnd === 0) {\r\n      const startTagMatch = parseStartTag()\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue\r\n      }\r\n      const endTagMatch = html.match(endTag)\r\n      if (endTagMatch) {\r\n        advance(endTagMatch[0].length)\r\n        end(endTagMatch[1])\r\n        continue\r\n      }\r\n    }\r\n    let text\r\n    if (textEnd > 0) text = html.substring(0, textEnd)\r\n    if (text) {\r\n      advance(text.length)\r\n      chars(text)\r\n    }\r\n  }\r\n\r\n  return root\r\n\r\n}\r\n","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\n\r\n\r\nfunction genProps (attrs) {\r\n  let str = ''\r\n  const len = attrs.length\r\n  for (let i = 0; i < len; i++) {\r\n    const attr = attrs[i]\r\n    if (attr.name === 'style') {\r\n      let obj = {}\r\n      attr.value.split(';').forEach(item => {\r\n        let [key, value] = item.split(':')\r\n        obj[key] = value\r\n      })\r\n      attr.value = obj\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  return `{ ${str.slice(0, -1)} }`\r\n}\r\n\r\nfunction gen (node) {\r\n  if (node.type === 1) {\r\n    // 标签\r\n    return generate(node)\r\n  } else {\r\n    // 文本\r\n    let text = node.text\r\n    if (defaultTagRE.test(text)) {\r\n      // 插值表达式文本\r\n      let tokens = []\r\n      let match\r\n      let index = 0\r\n      let lastIndex = defaultTagRE.lastIndex = 0 // 重置正则索引\r\n      while (match = defaultTagRE.exec(text)) {\r\n        index = match.index\r\n        if (index > lastIndex) {\r\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)))\r\n        }\r\n        tokens.push(`_s(${match[1].trim()})`)\r\n        lastIndex = index + match[0].length\r\n      }\r\n      if (lastIndex < text.length) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n      }\r\n      return `_v(${tokens.join('+')})`\r\n    } else {\r\n      // 普通文本\r\n      return `_v(${JSON.stringify(text)})`\r\n    }\r\n  }\r\n}\r\n\r\nfunction genChildren (el) {\r\n  const children = el.children\r\n  if (children) {\r\n    return children.map(child => gen(child)).join(',')\r\n  }\r\n}\r\n\r\nexport function generate (el) {\r\n  let children = genChildren(el)\r\n  let code = `_c('${el.tag}',${\r\n    el.attrs.length ? genProps(el.attrs) : 'undefined'\r\n  }${\r\n    children ? ',' + children : ''\r\n  })`\r\n  return code\r\n}\r\n","import { parseHTML } from \"./parse\";\r\nimport { generate } from \"./generate\";\r\n\r\n\r\nexport function compileToFunction (template) {\r\n  const ast = parseHTML(template)\r\n  const code = generate(ast)\r\n  const render = `with(this){return ${code}}`\r\n  const fn = new Function(render)\r\n  return fn\r\n}\r\n","let cbs = []\r\nlet waiting = false\r\n\r\nfunction flushCallbacks () {\r\n  for (let i = 0; i < cbs.length; i++) {\r\n    const cb = cbs[i]\r\n    cb()\r\n  }\r\n  waiting = false\r\n  cbs = []\r\n}\r\n\r\n\r\nexport function nextTick (cb) {\r\n  cbs.push(cb)\r\n  if (!waiting) {\r\n    waiting = true\r\n    Promise.resolve().then(flushCallbacks)\r\n  }\r\n}\r\n\r\nexport function isObject (obj) {\r\n  return typeof obj === 'object' && obj != null\r\n}\r\n\r\nconst LIFECYCLE_HOOKS = ['beforeCreate', 'created', 'beforeMount', 'mounted']\r\n\r\nfunction mergeHook (parentVal, childVal) {\r\n  if (childVal) {\r\n    if (parentVal) {\r\n      return parentVal.concat(childVal)\r\n    } else {\r\n      return [childVal]\r\n    }\r\n  } else {\r\n    return parentVal\r\n  }\r\n}\r\n\r\nconst strats = {}\r\n\r\nLIFECYCLE_HOOKS.forEach(hook => strats[hook] = mergeHook)\r\n\r\nstrats.components = function (parentVal, childVal) {\r\n  const res = Object.create(parentVal)\r\n  if (childVal) {\r\n    Object.keys(childVal).forEach(key => res[key] = childVal[key])\r\n  }\r\n  return res\r\n}\r\n\r\nexport function mergeOptions (parent, child) {\r\n  const options = {}\r\n\r\n  // 第一种情况\r\n  // {a: 1} {a: 2} -> {a:2}\r\n  // 第二种\r\n  // undefined {a: 2} -> {a: 2}\r\n  // 第三种\r\n  // {a: 1} undefined -> {a: 1}\r\n  function mergeField (key) {\r\n    // 策略模式 用来判断生命周期，data，components等\r\n    if (strats[key]) return options[key] = strats[key](parent[key], child[key])\r\n\r\n    if (isObject(parent[key]) && isObject(child[key])) {\r\n      options[key] = { ...parent[key], ...child[key] }\r\n    } else {\r\n      if (child[key]) {\r\n        options[key] = child[key]\r\n      } else {\r\n        options[key] = parent[key]\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  Object.keys(parent).forEach(key => mergeField(key))\r\n\r\n  Object.keys(child).forEach(key => {\r\n    if (!parent.hasOwnProperty(key)) {\r\n      mergeField(key)\r\n    }\r\n  })\r\n\r\n  return options\r\n}\r\n\r\nfunction makeUp (tagStr) {\r\n  const map = {}\r\n  tagStr.split(',').forEach(tag => map[tag] = true)\r\n  return (tag) => !!map[tag]\r\n}\r\n\r\nexport const isReservedTag = makeUp('a,p,div,ul,li,span,input,button,b')\r\n","import { nextTick } from \"../utils\";\r\n\r\nlet has = {}\r\nlet queue = []\r\nlet pending = false\r\n\r\nfunction flushSchedulerQueue () {\r\n  for (let i = 0; i < queue.length; i++) {\r\n    let watcher = queue[i]\r\n    watcher.run()\r\n  }\r\n  has = {}\r\n  queue = []\r\n  pending = false\r\n}\r\n\r\nexport function queueWatcher (watcher) {\r\n  let id = watcher.id\r\n  if (has[id] == null) {\r\n    queue.push(watcher)\r\n    has[id] = true\r\n    if (!pending) {\r\n      pending = true\r\n      nextTick(flushSchedulerQueue)\r\n    }\r\n  }\r\n}\r\n","import { popTarget, pushTarget } from \"./dep\";\r\nimport { queueWatcher } from \"./scheduler\";\r\n\r\nlet id = 0\r\n\r\nclass Watcher {\r\n  constructor (vm, exprOrFn, cb, options) {\r\n    this.vm = vm\r\n    this.cb = cb\r\n    this.options = options\r\n    this.id = id++\r\n    this.getter = exprOrFn\r\n    this.deps = [] // 存放对应的deps\r\n    this.depsId = new Set()\r\n    this.get()// 让updateComponent执行 render()方法\r\n  }\r\n\r\n  // 对属性进行取值操作\r\n  // 属性取值时，需要记住对应的watcher\r\n  get () {\r\n    pushTarget(this)\r\n    this.getter()\r\n    popTarget()\r\n  }\r\n\r\n  addDep (dep) {\r\n    const id = dep.id\r\n    if (!this.depsId.has(id)) {\r\n      this.depsId.add(id)\r\n      this.deps.push(dep)\r\n      dep.addSub(this)\r\n    }\r\n  }\r\n\r\n  run () {\r\n    this.get()\r\n  }\r\n\r\n  update () {\r\n    queueWatcher(this)\r\n  }\r\n}\r\n\r\n/*let has = {}\r\nlet queue = []\r\n\r\nfunction flushSchedulerQueue () {\r\n  for (let i = 0; i < queue.length; i++) {\r\n    let watcher = queue[i]\r\n    watcher.run()\r\n  }\r\n  has = {}\r\n  queue = []\r\n}\r\n\r\nfunction queueWatcher (watcher) {\r\n  let id = watcher.id\r\n  if (has[id] == null) {\r\n    queue.push(watcher)\r\n    has[id] = true\r\n    setTimeout(flushSchedulerQueue)\r\n  }\r\n}*/\r\n\r\nexport default Watcher\r\n","import { isObject, isReservedTag } from \"../utils\";\r\n\r\nfunction createComponent (vm, tag, data, key, children, Ctor) {\r\n  if (isObject(Ctor)) {\r\n    // 如果Ctor是对象，转成函数\r\n    Ctor = vm.$options._base.extend(Ctor)\r\n  }\r\n  data.hook = {\r\n    // 初始化组件钩子函数\r\n    init (vNode) {\r\n      let child = vNode.componentOptions = new vNode.componentOptions.Ctor({})\r\n      child.$mount()\r\n    }\r\n  }\r\n  // 组件的虚拟节点与一般标签的区别：\r\n  // 虚拟节点拥有hook和当前组件的componentOptions（存放了组件的构造函数）\r\n  return vnode(vm, `vue-component-${Ctor.cid}-${tag}`, data, key, undefined, undefined, { Ctor })\r\n}\r\n\r\nexport function createElement (vm, tag, data = {}, ...children) {\r\n  // 对标签名做过滤\r\n  if (isReservedTag(tag)) {\r\n    // html标签\r\n    return vnode(vm, tag, data, data.key, children, undefined)\r\n  } else {\r\n    // 组件\r\n    const Ctor = vm.$options.components[tag]\r\n    return createComponent(vm, tag, data, data.key, children, Ctor)\r\n  }\r\n\r\n}\r\n\r\nexport function createTextVnode (vm, text) {\r\n  return vnode(vm, undefined, undefined, undefined, undefined, text)\r\n}\r\n\r\nexport function isSameVNode(oldVNode, newVNode) {\r\n  return (oldVNode.tag === newVNode.tag) && (oldVNode.key === newVNode.key)\r\n}\r\n\r\nfunction vnode (vm, tag, data, key, children, text, componentOptions) {\r\n  return {\r\n    vm, tag, children, data, key, text, componentOptions\r\n  }\r\n}\r\n","import { isSameVNode } from \"./index\";\r\n\r\nfunction createComponent (vNode) {\r\n  let i = vNode.data\r\n  if ((i = i.hook) && (i = i.init)) {\r\n    i(vNode) // 调用组件的初始化\r\n  }\r\n  return !!vNode.componentOptions;\r\n\r\n}\r\n\r\nexport function createElm (vNode) {\r\n  const { tag, children, key, data, text, vm } = vNode\r\n  if (typeof tag === 'string') {\r\n    // 可能是组件\r\n    if (createComponent(vNode)) {\r\n      return vNode.componentOptions.$el\r\n    }\r\n\r\n    vNode.el = document.createElement(tag)\r\n    updateProperties(vNode)\r\n    children.forEach(child => {\r\n      vNode.el.appendChild(createElm(child))\r\n    })\r\n  } else {\r\n    vNode.el = document.createTextNode(text)\r\n  }\r\n  return vNode.el\r\n}\r\n\r\n// 添加标签属性\r\nfunction updateProperties (vNode, oldProps = {}) {\r\n  const newProps = vNode.data || {}\r\n  const el = vNode.el\r\n\r\n  // 老的属性新的没有，移除新节点上的属性（diff）\r\n  for (const key in oldProps) {\r\n    if (!newProps[key]) el.removeAttribute(key)\r\n  }\r\n\r\n  // 比对样式\r\n  const newStyle = newProps.style || {}\r\n  const oldStyle = oldProps.style || {}\r\n  for (const key in oldStyle) {\r\n    if (!newStyle[key]) el.style[key] = ''\r\n  }\r\n\r\n  // 新的属性老的没有，直接覆盖\r\n  for (const key in newProps) {\r\n    if (key === 'style') {\r\n      const styles = newProps.style\r\n      for (const styleName in styles) {\r\n        el.style[styleName] = styles[styleName].trim()\r\n      }\r\n    } else {\r\n      console.log(el)\r\n      el && el.setAttribute(key, newProps[key])\r\n    }\r\n  }\r\n}\r\n\r\nfunction updateChildren (parent, oldChildren, newChildren) {\r\n\r\n  let oldStartIndex = 0 // 老的头索引\r\n  let oldEndIndex = oldChildren.length - 1 // 老的尾索引\r\n  let oldStartVNode = oldChildren[0] // 老的开始节点\r\n  let oldEndVNode = oldChildren[oldEndIndex] // 老的结束节点\r\n\r\n  let newStartIndex = 0 // 新的头索引\r\n  let newEndIndex = newChildren.length - 1 // 新的尾索引\r\n  let newStartVNode = newChildren[0] // 新的开始节点\r\n  let newEndVNode = newChildren[newEndIndex] // 新的结束节点\r\n\r\n  function makeIndexByKey (oldChildren) {\r\n    let map = {}\r\n    oldChildren.forEach((item, index) => {\r\n      map[item.key] = index\r\n    })\r\n    return map\r\n  }\r\n\r\n  const map = makeIndexByKey(oldChildren)\r\n\r\n  while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\r\n    if (!oldStartVNode) {\r\n      oldStartVNode = oldChildren[++oldStartIndex]\r\n      continue\r\n    }\r\n    if (!oldEndVNode) {\r\n      oldEndVNode = oldChildren[--oldEndIndex]\r\n      continue\r\n    }\r\n    // 可进行优化策略的4种情况\r\n    // 1. 尾部插入\r\n    if (isSameVNode(oldStartVNode, newStartVNode)) {\r\n      patch(oldStartVNode, newStartVNode)\r\n      oldStartVNode = oldChildren[++oldStartIndex]\r\n      newStartVNode = newChildren[++newStartIndex]\r\n    }\r\n    // 2. 头部插入\r\n    else if (isSameVNode(oldEndVNode, newEndVNode)) {\r\n      patch(oldEndVNode, newEndVNode)\r\n      oldEndVNode = oldChildren[--oldEndIndex]\r\n      newEndVNode = newChildren[--newEndIndex]\r\n    }\r\n    // 3. 头移动到尾部\r\n    else if (isSameVNode(oldStartVNode, newEndVNode)) {\r\n      patch(oldStartVNode, newEndVNode)\r\n      parent.insertBefore(oldStartVNode.el, oldEndVNode.el.nextSibling)\r\n      oldStartVNode = oldChildren[++oldStartIndex]\r\n      newEndVNode = newChildren[--newEndIndex]\r\n    }\r\n    // 4. 尾移动到头部\r\n    else if (isSameVNode(oldEndVNode, newStartVNode)) {\r\n      patch(oldEndVNode, newStartVNode)\r\n      parent.insertBefore(oldEndVNode.el, oldStartVNode.el)\r\n      oldEndVNode = oldChildren[--oldEndIndex]\r\n      newStartVNode = newChildren[++newStartIndex]\r\n    }\r\n    // 暴力比对\r\n    else {\r\n      // 1. 查找当前老节点索引和key的关系\r\n      // 移动端的时候通过新的key，去找对应的老节点索引，获取老的节点，移动老的节点\r\n      let moveIndex = map[newStartVNode.key]\r\n      if (moveIndex == null) {\r\n        parent.insertBefore(createElm(newStartVNode), oldStartVNode.el)\r\n      } else {\r\n        let moveVNode = oldChildren[moveIndex]\r\n        oldChildren[moveIndex] = null\r\n        patch(moveVNode, newStartVNode)\r\n        if (!moveVNode.el) return\r\n        parent.insertBefore(moveVNode.el, oldStartVNode.el)\r\n      }\r\n      newStartVNode = newChildren[++newStartIndex]\r\n    }\r\n  }\r\n\r\n  // 新的比老的多，插入新的节点\r\n  if (newStartIndex <= newEndIndex) {\r\n    for (let i = newStartIndex; i <= newEndIndex; i++) {\r\n      let nextEle = newChildren[newEndIndex + 1] == null ? null : newChildren[newEndIndex + 1].el\r\n      // insertBefore第二个参数如果是null，等价于appendChild\r\n      parent.insertBefore(createElm(newChildren[i]), nextEle)\r\n      // parent.appendChild(createElm(newChildren[i]))\r\n    }\r\n  }\r\n\r\n  // 老的比新的多，删除多余的老节点\r\n  if (oldStartIndex <= oldEndIndex) {\r\n    for (let i = oldStartIndex; i <= oldEndIndex; i++) {\r\n      let child = oldChildren[i]\r\n      if (child != null) {\r\n        parent.removeChild(child.el)\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport function patch (oldVNode, vNode) {\r\n  // 1. 组件\r\n  if (!oldVNode) {\r\n    // 虚拟节点创建元素\r\n    return createElm(vNode)\r\n  }\r\n\r\n  // 2. 是一个真实dom 初次渲染\r\n  const isRealElement = oldVNode.nodeType\r\n  if (isRealElement) {\r\n    const oldElm = oldVNode\r\n    const parentElm = oldElm.parentNode\r\n    const el = createElm(vNode) // 根据虚拟节点创建真实节点\r\n    parentElm.insertBefore(el, oldElm.nextSibling)\r\n    parentElm.removeChild(oldElm)\r\n    return el\r\n  } else {\r\n    // 3. 两个虚拟节点的比对 diff算法\r\n    /*\r\n    * 四种情况\r\n    * 1） 两个虚拟节点的标签不一样，直接替换\r\n    * 2） 两个文本元素（{tag：undefined}）\r\n    * 3） 元素相同，复用老节点，更新属性\r\n    * 4） 更新子节点\r\n    * */\r\n\r\n    // 1）\r\n    if (oldVNode.tag !== vNode.tag) {\r\n      oldVNode.el && oldVNode.el.parentNode.replaceChild(createElm(vNode), oldVNode.el)\r\n      return\r\n    }\r\n\r\n    // 2)\r\n    if (!oldVNode.tag && oldVNode.text !== vNode.text) {\r\n      oldVNode.el.textContent = vNode.text\r\n      return\r\n    }\r\n\r\n    // 3）\r\n    let el = vNode.el = oldVNode.el\r\n    // 老的节点属性与新的属性进行比对\r\n    updateProperties(vNode, oldVNode.data)\r\n\r\n    // 4）\r\n    /*\r\n    * 子节点比对，三种情况\r\n    * 4.1）旧的有子节点，新的没有子节点 --> 删除旧的子节点\r\n    * 4.2）新的有子节点，旧的没有子节点 --> 在旧节点上增加子节点\r\n    * 4.3）旧的有子节点，新的也有子节点 --> 真·diff算法\r\n    * */\r\n    const oldChildren = oldVNode.children || []\r\n    const newChildren = vNode.children || []\r\n    if (oldChildren.length > 0 && newChildren.length > 0) {\r\n      // 4.3） 真的diff算法\r\n      updateChildren(el, oldChildren, newChildren)\r\n    } else if (oldChildren.length > 0) {\r\n      // 4.1）\r\n      el.innerHTML = ''\r\n    } else if (newChildren.length > 0) {\r\n      // 4.2）\r\n      newChildren.forEach(child => el.appendChild(createElm(child)))\r\n    }\r\n\r\n  }\r\n}\r\n","import Watcher from \"./observer/watcher\";\r\nimport { patch } from \"./vdom/patch\";\r\n\r\nexport function lifecycleMixin (Vue) {\r\n  Vue.prototype._update = function (vNode) {\r\n    const vm = this\r\n    // vm.$el = patch(vm.$options.el, vNode)\r\n    // 第一次初始化替换真实元素，第二次走diff算法\r\n    const prevVNode = vm._vnode\r\n    vm._vnode = vNode\r\n    if (!prevVNode) {\r\n      vm.$el = patch(vm.$el, vNode)\r\n    } else {\r\n      vm.$el = patch(prevVNode, vNode)\r\n    }\r\n  }\r\n}\r\n\r\nexport function mountComponent (vm) {\r\n  let updateComponent = () => {\r\n    const vNode = vm._render() // 返回虚拟节点\r\n    vm._update(vNode) // 渲染成真实节点\r\n  }\r\n\r\n  const w = new Watcher(vm, updateComponent, () => {\r\n  }, true) // updateComponent()\r\n}\r\n\r\nexport function callHook (vm, hook) {\r\n  const handlers = vm.$options[hook]\r\n  if (handlers && handlers.length) handlers.forEach(handler => handler.call(vm))\r\n}\r\n","import { initState } from \"./state\";\r\nimport { compileToFunction } from \"./compiler/index\";\r\nimport { callHook, mountComponent } from \"./lifecycle\";\r\nimport { mergeOptions, nextTick } from \"./utils\";\r\n\r\nexport function initMixin (Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this\r\n    vm.$options = mergeOptions(vm.constructor.options, options)\r\n    // 初始化状态\r\n    callHook(vm, 'beforeCreate')\r\n    initState(vm)\r\n    callHook(vm, 'created')\r\n\r\n    // 数据可以挂载到页面上\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el)\r\n    }\r\n  }\r\n\r\n  Vue.prototype.$nextTick = nextTick\r\n\r\n  Vue.prototype.$mount = function (el) {\r\n    el = typeof el === 'string' ? document.querySelector(el) : el\r\n    const vm = this\r\n    const options = vm.$options\r\n    vm.$el = el\r\n\r\n    if (!options.render) {\r\n      let template = options.template\r\n      if (!template && el) {\r\n        template = el.outerHTML\r\n      }\r\n      const render = compileToFunction(template)\r\n      options.render = render\r\n    }\r\n\r\n    mountComponent(vm)\r\n  }\r\n}\r\n\r\n","import { createElement, createTextVnode } from \"./src/vdom/index\";\r\n\r\nexport function renderMixin (Vue) {\r\n  // 创建元素的虚拟节点\r\n  Vue.prototype._c = function (...args) {\r\n    return createElement(this, ...args)\r\n  }\r\n  // 创建文本的虚拟节点\r\n  Vue.prototype._v = function (text) {\r\n    return createTextVnode(this, text)\r\n  }\r\n  // 转化字符串\r\n  Vue.prototype._s = function (val) {\r\n    return val == null ? '' : typeof val === 'object' ? JSON.stringify(val) : val\r\n  }\r\n\r\n  Vue.prototype._render = function () {\r\n    const vm = this\r\n    let render = vm.$options.render\r\n    let vNode = render.call(vm) // 生成虚拟节点，调用时会自动将变量进行取值，将实例结果进行渲染\r\n    return vNode\r\n  }\r\n}\r\n","import Vue from \"../index\";\r\nimport { mergeOptions } from \"../utils\";\r\n\r\nexport function initGlobalAPI (Vue) {\r\n  Vue.options = {}\r\n  // 静态方法mixin\r\n  Vue.mixin = function (mixin) {\r\n    this.options = mergeOptions(this.options, mixin)\r\n    return this // 链式调用\r\n  }\r\n\r\n  // 组件方法\r\n  Vue.options._base = Vue // Vue的构造函数\r\n  Vue.options.components = {} // 存放组件的定义\r\n  Vue.component = function (id, definition) {\r\n    definition.name = definition.name || id\r\n    definition = this.options._base.extend(definition)\r\n    this.options.components[id] = definition\r\n  }\r\n  let cid = 0\r\n  Vue.extend = function (options) {\r\n    const Super = this\r\n    const Sub = function VueComponent (options) {\r\n      this._init(options)\r\n    }\r\n    Sub.cid = cid++\r\n    Sub.prototype = Object.create(Super.prototype)\r\n    Sub.prototype.constructor = Sub\r\n    Sub.component = Super.component\r\n    Sub.options = mergeOptions(Super.options, options)\r\n    // 传入对象，返回一个构造函数\r\n    return Sub\r\n  }\r\n}\r\n","import { initMixin } from \"./init\";\r\nimport { lifecycleMixin } from \"./lifecycle\";\r\nimport { renderMixin } from \"../render\";\r\nimport { initGlobalAPI } from \"./global-api/index\";\r\n// 测试用\r\nimport { compileToFunction } from \"./compiler/index\";\r\nimport { createElm, patch } from \"./vdom/patch\";\r\n\r\nfunction Vue (options) {\r\n  this._init(options)\r\n}\r\n\r\ninitMixin(Vue) // 扩展初始化\r\nlifecycleMixin(Vue) // 扩展更新方法（真实dom渲染） _update()\r\nrenderMixin(Vue) // 扩展渲染的方法（调用自定义render方法） _render()\r\n\r\ninitGlobalAPI(Vue)\r\n\r\n/*\r\n* diff算法测试内容\r\n* */\r\n// 构建两个虚拟dom，方便对比\r\n/*const vm1 = new Vue({\r\n  data () {\r\n    return {\r\n      name: 'lu'\r\n    }\r\n  }\r\n})\r\n\r\n// 模板变成render函数\r\nconst render1 = compileToFunction(`<ul id=\"a\" a=\"1\" style=\"color: red;\">\r\n  <li key=\"A\">A</li>\r\n  <li key=\"B\">B</li>\r\n  <li key=\"C\">C</li>\r\n  <li key=\"D\">D</li>\r\n  <li key=\"F\">F</li>\r\n</ul>`)\r\nconst oldVNode = render1.call(vm1)\r\n\r\nconst el = createElm(oldVNode)\r\ndocument.body.appendChild(el)\r\n\r\nconst vm2 = new Vue({\r\n  data () {\r\n    return { name: 'lug' }\r\n  }\r\n})\r\n\r\nconst render2 = compileToFunction(`<ul id=\"b\" b=\"2\" style=\"background:yellow;\">\r\n  <li key=\"N\">N</li>\r\n  <li key=\"A\">A</li>\r\n  <li key=\"C\">C</li>\r\n  <li key=\"B\">B</li>\r\n  <li key=\"E\">E</li>\r\n</ul>`)\r\nconst newVNode = render2.call(vm2)\r\n\r\nsetTimeout(() => {\r\n  patch(oldVNode, newVNode)\r\n}, 1000)*/\r\n\r\nexport default Vue\r\n"],"names":["oldArrayProtoMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","result","call","ob","__ob__","inserted","slice","observeArray","dep","notify","pushTarget","watcher","Dep","target","popTarget","id","subs","addDep","push","update","Observer","value","defineProperty","enumerable","configurable","isArray","setPrototypeOf","walk","i","length","observe","data","keys","key","defineReactive","dependArray","arr","current","depend","childOb","get","set","newValue","initState","vm","opts","$options","initData","proxy","source","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createASTElement","tag","attrs","type","children","parent","root","currentParent","stack","start","tagName","element","end","pop","chars","text","replace","advance","n","substring","parseStartTag","match","attr","name","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRE","genProps","str","len","obj","split","item","JSON","stringify","gen","node","generate","test","tokens","index","lastIndex","exec","trim","join","genChildren","el","map","child","code","compileToFunction","template","ast","render","fn","Function","cbs","waiting","flushCallbacks","cb","nextTick","Promise","resolve","then","isObject","LIFECYCLE_HOOKS","mergeHook","parentVal","childVal","concat","strats","hook","components","res","mergeOptions","options","mergeField","hasOwnProperty","makeUp","tagStr","isReservedTag","has","queue","pending","flushSchedulerQueue","run","queueWatcher","Watcher","exprOrFn","getter","deps","depsId","Set","add","addSub","createComponent","Ctor","_base","extend","init","vNode","componentOptions","$mount","vnode","cid","undefined","createElement","createTextVnode","isSameVNode","oldVNode","newVNode","createElm","$el","document","updateProperties","appendChild","createTextNode","oldProps","newProps","removeAttribute","newStyle","style","oldStyle","styles","styleName","console","log","setAttribute","updateChildren","oldChildren","newChildren","oldStartIndex","oldEndIndex","oldStartVNode","oldEndVNode","newStartIndex","newEndIndex","newStartVNode","newEndVNode","makeIndexByKey","patch","insertBefore","nextSibling","moveIndex","moveVNode","nextEle","removeChild","isRealElement","nodeType","oldElm","parentElm","parentNode","replaceChild","textContent","innerHTML","lifecycleMixin","Vue","_update","prevVNode","_vnode","mountComponent","updateComponent","_render","w","callHook","handlers","handler","initMixin","_init","constructor","$nextTick","querySelector","outerHTML","renderMixin","_c","_v","_s","val","initGlobalAPI","mixin","component","definition","Super","Sub","VueComponent"],"mappings":"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"}